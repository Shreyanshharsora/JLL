<div ng-controller="BuildingsEditController">
<style> .form-wizard .progress { margin-bottom: 5px; } </style>
<!-- BEGIN MAIN CONTENT -->
    <div class="row">
		<div class="col-md-12">
        
			<!-- Begin Edit form -->
            <div tabindex="-1">
                
                <div class="portlet box blue-madison" id="form_wizard_1">
					<div class="portlet-title">
						<div class="caption">
							<i class="fa fa-plus"></i> Edit Building Information - <span class="step-title">
							Step {{ tab_number }} of 2 </span>
						</div>						
					</div>
					<div class="portlet-body form">
						<form action="javascript: void(0);" onsubmit="return false" class="form-horizontal" id="frmEdit" name="frmEdit" method="POST">
							<div class="form-wizard">
								<div class="form-body">
									<ul class="nav nav-pills nav-justified steps" style="margin: 0; padding: 0px 0px 5px 0;">
										<li class="active">
											<a href="javascript: void(0);" id="building_tab" data-target="#tab1" data-toggle="tab" class="step" ng-click="change_tab_number(1)" >
                                                <span class="number"> 1 </span>
                                                <span class="desc"><i class="fa fa-check"></i> Building Details </span>
                                            </a>
										</li>
										<li>
											<a href="javascript: void(0);" id="floor_tab" data-toggle="tab" class="step" ng-click="submit_building_frm_edit(edit_fields);">
    											<span class="number"> 2 </span>
    											<span class="desc"> <i class="fa fa-check"></i> Floor Detail </span>
											</a>
										</li>
										
									</ul>
									<div id="bar" class="progress progress-striped" role="progressbar">
										<div class="progress-bar progress-bar-success">
										</div>
									</div>
									<div class="tab-content">
										
                                        <div class="tab-pane active" id="tab1">
                                            <div class="alert alert-danger display-hide">
            									<button class="close" data-close="alert"></button>
            									You have some form errors. Please check below.
            								</div>
            								<div class="alert alert-success display-hide">
            									<button class="close" data-close="alert"></button>
            									Your form validation is successful!
            								</div>
											
                                            
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Building Name <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.v_name" data-error-message="Building Name" name="building[v_name]" class="form-control required"/>
                                                </div>
                                            </div>
                                          
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Building Image<span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <div class="fileinput fileinput-new" data-provides="fileinput">
                                                        <!--div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div-->  
                                                        <div>
                                                            
                                                            <span class="btn default btn-file" ng-click="trigger('#fileInput')">
                                                                <div ng-class="enableCrop == false ? 'fileinput-new ng-show-inline-block' : 'fileinput-new ng-hide'" ng-show="enableCrop == false" >Select image</div>
                                                                <span ng-if="enableCrop"> Change </span>
                                                            </span>
                                                            <div ng-show="enableCrop" id="image_name" style="display: inline-block; margin-right: 5px;">{{ edit_fields.v_image_url }}</div>  
                                                            <input type="hidden" name="building[original_image_name]" id="original_image_name" value="" />
                                                            <!--a ng-if="enableCrop" href="javascript:;" ng-class="enableCrop == true ? 'btn default fileinput-exists  ng-show-inline-block' : 'btn default fileinput-exists ng-hide'" data-dismiss="fileinput" ng-click="removeImage()" > Remove </a-->
                                                        </div>
                                                    </div>
                                                    <input type="hidden" name="building[v_image_url]" ng-model="edit_fields.v_image_url" id="full-image-element" value="{{ imageDataURI }}" class="required" data-error-message="Image" />
                                                    <!--div class="clearfix margin-top-10">
                                                        <span class="label label-danger">NOTE! </span> &nbsp;
                                                        <span>&nbsp;&nbsp;Attached image thumbnail is supported in Latest Firefox, Chrome, Opera, Safari and Internet Explorer 10 only </span>
                                                    </div-->
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">No of Floors <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_floor_number" data-error-message="Zip" name="building[i_floor_number]" class="form-control required"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
            									<label class="control-label col-md-3">Status<span class="required"> * </span> </label>
            									<div class="col-md-4">
            										<select class="form-control bs-select add_e_status required select_msg" ng-model="edit_fields.b_status" name="building[b_status]" data-error-message="Status">
            											<option value="">Select Status</option>
                                                        <option value="Existing">Existing</option>
                                                        <option value="Under construction">Under construction</option>
                                                        <option value="Under renovation">Under renovation</option>
                                                        <option value="Long-term proposed (>24 months)">Long-term proposed (>24 months)</option>
                                                        <option value="Short-term proposed (<24 months)">Short-term proposed (<24 months)</option>
                                                        <option value="Hidden">Hidden</option>
            										</select>
            									</div>
            								</div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Address 1 <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.v_address1" data-error-message="Address 1" name="building[v_address1]" class="form-control required"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Address 2 <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.v_address2" data-error-message="Address 2" name="building[v_address2]" class="form-control required"/>
                                                </div>
                                            </div>
                                            
                                            <div class="form-group">
            									<label class="control-label col-md-3">City<span class="required"> * </span> </label>
            									<div class="col-md-4">
            										<select ng-change="get_floor_height(edit_fields.i_city_id); get_order(edit_fields.i_city_id);" class="form-control bs-select required select_msg" ng-model="edit_fields.i_city_id" ng-options="key as value for (key , value) in cities" name="building[i_city_id]" data-error-message="City">
            											<option value="">Select City</option>
            										</select>
            									</div>
                                                <input type="hidden" name="building[v_city]" id="city_name" />
            								</div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">State <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.v_state" data-error-message="State" name="building[v_state]" class="form-control required"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Zipcode <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.v_zip" data-error-message="Zip" name="building[v_zip]" class="form-control required"/>
                                                </div>
                                            </div>
                                            
                                            
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Building Order <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_order" data-error-message="Building Order" name="building[i_order]" id="order_no" class="form-control required number"/>
                                                </div>
                                            </div>
                                            
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Year Built <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_year_built" data-error-message="Built Year" name="building[i_year_built]" class="form-control required validate_year"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Submarket <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.v_submarket" data-error-message="Submarket" name="building[v_submarket]" class="form-control required"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Class <span class="required"> * </span> </label>
                                                <div class="col-md-4">
            										<select class="form-control bs-select required" ng-model="edit_fields.e_class" name="building[e_class]" data-error-message="Class">
            											<option value="">Select Class</option>
                                                        <option value="Trophy">Trophy</option>
                                                        <option value="Class A">Class A</option>
                                                        <option value="Class B">Class B</option>
                                                    </select>
            									</div>
                                            </div>
                                            
                                            <div class="form-group">
                                                <label class="control-label col-md-3">RBA <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_rba" data-error-message="RBA" name="building[i_rba]" class="form-control required number"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Avg. Floor Plate <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_avg_floor_plate" data-error-message="Avg. Floor Plate" name="building[i_avg_floor_plate]" class="form-control required number"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Total Vacant Surface <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_total_vacant_sf" data-error-message="Class" name="building[i_total_vacant_sf]" class="form-control required number"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Occupied <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_occupied" data-error-message="Occupied" name="building[i_occupied]" class="form-control required number"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Direct Vacant Surface <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_direct_vacant_sf" data-error-message="Direct Vacant Surface" name="building[i_direct_vacant_sf]" class="form-control required number"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Leased <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.i_leased" data-error-message="Leased" name="building[i_leased]" class="form-control required number"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Rent <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.d_rent" data-error-message="Rent" name="building[d_rent]" class="form-control required number"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Owner <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <input type="text" ng-enter ng-model="edit_fields.v_owner" data-error-message="Owner" name="building[v_owner]" class="form-control required"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Leed <span class="required"> * </span> </label>
                                                <div class="col-md-4">
                                                    <select class="form-control bs-select required select_msg" ng-model="edit_fields.i_leed" name="building[i_leed]" data-error-message="Status">
            											<option value="">Select</option>
                                                        <option value="1">Yes</option>
                                                        <option value="0">No</option>
            										</select>
                                                </div>
                                            </div>
                                            
                                            <div class="form-group">
                                                <label class="control-label col-md-3">Leed Cert. <span class="required"> * </span> </label>
                                                <div class="col-md-4">
            										<select class="form-control bs-select required" ng-model="edit_fields.e_leed_cert" name="building[e_leed_cert]" data-error-message="Leed Cert">
            											<option value="">Select Leed Cert</option>
                                                        <option value="Certified">Certified</option>
                                                        <option value="Silver">Silver</option>
                                                        <option value="Gold">Gold</option>
                                                        <option value="Platinum">Platinum</option>
                                                    </select>
            									</div>
                                            </div>
                                            
                                            <div class="form-group">
            									<label class="control-label col-md-3">Is Default<span class="required"> * </span> </label>
            									<div class="col-md-4">
            										<select class="form-control bs-select" ng-model="edit_fields.is_default" name="building[is_default]" data-error-message="Status">
            											<option value="">Select</option>
                                                        <option value="1">Yes</option>
                                                        <option value="0">No</option>
            										</select>
            									</div>
            								</div>
                                            
                                            <input type="hidden" ng-model="edit_fields.id" name="building[id]" class="form-control" value="{{ edit_fields.id }}"/>
                                            <input type="hidden" ng-model="edit_fields.image_type" name="building[image_type]" class="form-control" value="{{ image_type }}"/>
                                            <input type="hidden" ng-model="edit_fields.remove_items" id="remove_items" name="building[remove_items]" class="form-control" value=""/>
                                            
                                            <div class="form-actions">
            									<div class="row">
            										<div class="col-md-offset-3 col-md-9">
            											<a href="javascript:void(0);" class="btn blue button-next" ng-click="submit_building_frm_edit(edit_fields)"> Continue <i class="m-icon-swapright m-icon-white"></i> </a>
            										</div>
            									</div>
            								</div>
										</div>
                                        
										<div class="tab-pane" id="tab2">
                                                
                                                <div class="form-title building_graph">
                                                    <h4><label>Floor Height: </label> {{ floor_height }}em</h4>
                                                    <div id="building" class="building">
                                                         <img id="image_1" alt="" src="" class="mask_img" />
                                                         <div class="floors" id="floors">
                                                            <div ng-repeat="row in data_rows " id="floor-{{ data_rows.length-$index }}" class="floor_div clearfix" style="height:{{ floor_height }}em;"></div>
                                                         </div>
                                                         <!--a href="javascript:void(0);" class="btn default button-prev" style="margin: 1% 2%; margin: 20% 0; width: 165px;" ng-click="apply_result()" > Apply Changes </a-->
                                                    </div>
                                                </div>
                                                                                                
                                                <div class="building_matrix">
                                                     <div class="align-right legends">
                                                        <div class="key_content">
                                                            <span ng-repeat="(key , value) in unit_assets"><label style="background-color: {{ value.v_color }}; "></label><span style="vertical-align: middle; margin-left: 10px;">{{ value.v_name }}</span></span>
                                                        </div>
                                                    </div>
                                                    <h4> Floor</h4>                                                    
                                                    <div ng-repeat="row in data_rows">
                                                        <div class="main_floor_div" style="float: left; width:90%;" id="floor_{{ $index+1 }}" rel="{{ $index+1 }}"  >
                                                            <label class="control-label col-md-1" style="font-weight: bold; width: 6.333%;"> {{ $index+1 }}</label>
                                                            <div style="display:inline-block; max-width: 90%;" class="main_unit_box">
                                                                
                                                                <!-- Default div for left and right margin -->
                                                                <div class="form-group floor unit_box">
                    												<div class="col-md-5">
                                                                        <select class="form-control bs-select change_color select_{{ $index+1 }}_1" name="unit[{{($index+1)}}][unit_{{($index+1)}}][]" >
                                                                            <option value="L" rel="#FFFFFF" style="background-color: #FFFFFF;">L</option>
                                										</select>
                    												</div>
                                                                    <div class="col-md-4">
                                                                        <input type="text" class="form-control unit_value_{{ $index+1 }}_1" rel="1" name="unit[{{($index+1)}}][unit_amount_{{$index+1}}][]" ng-keyup="check_sum('floor_'+($index+1),$event)" ng-blur="apply_to_all_floors($event, $index+1)" ng-blur="$index != 0 ? apply_result($index+1) : ''" />
                                                                    </div>
                    											</div>
                                                                
                                                                <div class="form-group floor unit_box">
                    												<div class="col-md-5">
                                                                        <select class="form-control bs-select change_color select_{{ $index+1 }}_2" name="unit[{{($index+1)}}][unit_{{($index+1)}}][]" >
                                                                            <option value="R" rel="#FFFFFF" style="background-color: #FFFFFF;">R</option>
                                										</select>
                    												</div>
                                                                    <div class="col-md-4">
                                                                        <input type="text" class="form-control unit_value_{{ $index+1 }}_2" rel="2" name="unit[{{($index+1)}}][unit_amount_{{$index+1}}][]" ng-keyup="check_sum('floor_'+($index+1),$event)" ng-blur="apply_to_all_floors($event, $index+1)" ng-blur="$index != 0 ? apply_result($index+1) : ''" />
                                                                    </div>
                    											</div>
                                                                <!-- Default div for left and right margin -->
                                                                
                                                                
                                                                <!--div class="form-group floor unit_box">
                    												<div class="col-md-5">
                                                                        <select class="form-control bs-select change_color select_{{ $index+1 }}_1" name="unit[{{($index+1)}}][unit_{{($index+1)}}][]" >
                                                                            <option ng-repeat="(key , value) in list_unit_assets" value="{{key}}" rel="{{value}}" style="background-color: {{value}};" ng-bind-html="key == 'L' || key == 'R' || key == 'M' ? key : ''" ng-selected="key == 'L'"></option>
                                										</select>
                    												</div>
                                                                    <div class="col-md-4">
                                                                        <input type="text" class="form-control unit_value_{{ $index+1 }}_1" rel="1" name="unit[{{($index+1)}}][unit_amount_{{$index+1}}][]" ng-keyup="check_sum('floor_'+($index+1),$event)" />
                                                                    </div>
                    											</div-->
                                                                
                                                                
                                                                
                                                                <!-- Add more unit box -->
                                                                <div class="form-group floor added_opt unit_box" ng-repeat="input in inputs[$index+1]">
                                                                    
                                                                	<div class="col-md-5">
                                                                        <select class="form-control bs-select change_color select_{{ $parent.$index+1 }}_{{ $index+3 }}" name="unit[{{($parent.$index+1)}}][unit_{{($parent.$index+1)}}][]" ng-blur="apply_result($parent.$index+1)"  >
                                                                            <option ng-repeat="(key , value) in list_unit_assets" value="{{key}}" rel="{{value}}" style="background-color: {{value}};" ng-bind-html="key == 'L' || key == 'R' || key == 'M' ? key : ''"></option>
                                										</select>
                    												</div>
                                                                    <div class="col-md-4">
                                                                        <input type="text" class="form-control unit_value_{{ $parent.$index+1 }}_{{ $index+3 }}" rel="{{ $index+3 }}" name="unit[{{($parent.$index+1)}}][unit_amount_{{$parent.$index+1}}][]" ng-keyup="check_sum('floor_'+($parent.$index+1),$event)" />
                                                                    </div>
                                                                    <div class="col-md-1" style="height: 33px;">
                                                                        <img src="{{GLOBAL.ASSET_URL}}img/remove-icon-small.png" style="vertical-align: bottom; cursor: pointer;" ng-click="removeInput($parent.$index+1, $index)" />
                                                                    </div>                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                        <div class="unit_add_more"  style="float: left; width:10%;">
                                                            <img ng-src="{{ GLOBAL.ADMIN_ASSET_URL+'img/plus_alt.png' }}" ng-click="addInput($index+1)" />
                                                        </div>
                                                    </div>
                                                </div>
    											<div class="clear"></div>
                                                <div class="form-actions">
                									<div class="row">
                										<div class="col-md-offset-3 col-md-9">
                                                            <a href="javascript:void(0);" class="btn default button-prev" ng-click="back_to_building_information()" > <i class="m-icon-swapleft"></i> Back </a>
                											<a href="javascript:void(0);" ng-enter class="btn green button-next" ng-click="submit_floor_frm_edit()"> Save <i class="m-icon-swapright m-icon-white"></i> </a>
                										</div>
                									</div>
                								</div>
										</div>
									</div>
								</div>
								
							</div>
						</form>
                        <form id="form_name" action="{{ GLOBAL.API_URL+'/employee/upload-for-ie' }}" method="post" enctype="multipart/form-data">
                            <input type="file" name="file_upload" id="fileInput" style="display: none;" />
                        </form>
					</div>
				</div>
                        
            </div>
            <!-- End add form -->
            <script type="text/javascript">
            $(document).ready(function(){
                $('a[data-toggle="tab"]').click(function(e){
                    e.preventDefault();
                });
                
                /*$(document).keypress(function(event){
                    var keycode = (event.keyCode ? event.keyCode : event.which);
                    if(keycode == '13'){
                        if($('#tab1').is(':visible')){
                            
                        }
                           
                    }
                });*/
                
            });
            </script>
		</div>
	</div>
<!-- END PAGE CONTENT-->
</div>